<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cskaoyan.erp.dao.WorkDao">

    <sql id="workColumns">
        work_id as workId,process_number as processNumber,product_id as productId,
        process_id as processId,device_id as deviceId,rating as rating
    </sql>

    <resultMap id="workMap" type="work">
        <id property="workId" column="work_id"/>
        <result property="processNumber" column="process_number"/>
        <result property="rating" column="rating"/>
        <association property="product" column="product_id" javaType="product"
                     select="com.cskaoyan.erp.dao.ProductDao.selectProductById"/>
        <association property="process" column="process_id" javaType="process"
                     select="com.cskaoyan.erp.dao.ProcessDao.selectProcessById"/>
        <association property="device" column="device_id" javaType="device"
                     select="com.cskaoyan.erp.dao.DeviceDao.findServiceDeviceById"/>
    </resultMap>

    <select id="selectAllWork" resultMap="workMap">
        select
        work_id,process_number,product_id,process_id,device_id,rating
        from `work`;
    </select>

    <select id="selectWorkById" resultMap="workMap">
        select
        work_id,process_number,product_id,process_id ,device_id,rating
        from `work`
        where work_id=#{id};
    </select>


</mapper>